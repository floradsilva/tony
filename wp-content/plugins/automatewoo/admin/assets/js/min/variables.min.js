jQuery(function(i){AutomateWoo.Variables={$meta_box:i("#aw_variables_box"),init:function(){this.init_clipboard(),i(document.body).on("change keyup",".aw-workflow-variable-parameter",this.update_preview_field),i(document.body).on("keypress","input.aw-workflow-variable-parameter",this.restrict_parameter_chars),this.$meta_box.on("click",".aw-workflow-variable",this.open_modal)},init_clipboard:function(){new Clipboard(".aw-clipboard-btn").on("success",function(a){i(".aw-clipboard-btn").html("Copied!"),setTimeout(function(){AutomateWoo.Modal.close()},500)})},open_modal:function(){AutomateWoo.Modal.open("ajax"),AutomateWoo.Modal.loading();var a={action:"aw_modal_variable_info",variable:i(this).text()};i.post(ajaxurl,a,function(a){AutomateWoo.Modal.contents(a),AutomateWoo.Variables.update_preview_field()})},update_preview_field:function(){var a=i("#aw_workflow_variable_preview_field"),e=a.data("variable"),r=[];i(".aw-workflow-variable-parameter").each(function(){var a=i(this).parents(".aw-workflow-variables-parameter-row:first");if(a.data("parameter-show")){var e=a.data("parameter-show").split("="),t=i('.aw-workflow-variable-parameter[name="'+e[0]+'"]');if(!t.length||t.val()!=e[1])return void a.hide();a.show()}var o={name:i(this).attr("name"),required:a.data("is-required"),value:i(this).val()};r.push(o)});var t=AutomateWoo.Variables.generate_variable_string(e,r);a.text(t),AutomateWoo.Modal.position()},generate_variable_string:function(a,e){var t="{{ "+a;if(e.length){var o=[];i.each(e,function(a,e){e.value?o.push(e.name+": '"+e.value+"'"):e.required&&o.push(e.name+": '...'")}),0<o.length&&(t+=" | ",t+=o.join(", "))}return t+" }}"},restrict_parameter_chars:function(a){if(-1!==i.inArray(a.which,[39,123,124,125]))return!1}},AutomateWoo.Variables.init()});
//# sourceMappingURL=variables.min.js.map
