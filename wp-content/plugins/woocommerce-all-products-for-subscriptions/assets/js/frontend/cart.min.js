jQuery(function(p){if("undefined"==typeof wcsatt_cart_params)return!1;var t=p(document);t.on("change",".wcsatt-options-cart [name^=convert_to_sub]",function(){var s=p(this),o=p("div.cart_totals"),r=p("table.shop_table.cart"),n=s.closest(".wcsatt-options-cart"),i=r.closest(".woocommerce"),t=o.find("input.wcsatt-add-cart-to-subscription-action-input"),a=s.val(),_=r.find('input[name="_wp_http_referer"]').val();i.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var c={security:wcsatt_cart_params.update_cart_option_nonce,subscription_scheme:a,add_to_subscription_checked:t.is(":checked")?"yes":"no",action:"wcsatt_update_cart_option"};p.post(wcsatt_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",c.action),c,function(t){if("success"===t.result){var a=p(p.parseHTML(t.html)),c=a.find("div.cart_totals"),e=a.find("table.shop_table.cart");_&&e.find('input[name="_wp_http_referer"]').val(_),e.find('input[name="update_cart"]').prop("disabled",!0),o.replaceWith(c),r.replaceWith(e),i.trigger("wcsatt_updated_cart")}else window.alert(wcsatt_cart_params.i18n_update_cart_sub_error),t.reset_to_scheme&&(s.is(":radio")?n.find('input[value="'+t.reset_to_scheme+'"]').prop("checked",!0):s.val(t.reset_to_scheme));i.unblock()})}),t.on("change",".wcsatt-add-cart-to-subscription-action-input",function(){var t=p("div.cart_totals"),a=p(this),c=a.closest(".wcsatt-add-cart-to-subscription-wrapper"),e=c.find(".wcsatt-add-cart-to-subscription-options"),s=t.find(".wcsatt-options-cart [name^=convert_to_sub]"),o=a.is(":checked"),r=s.val();if(o){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={subscription_scheme:r,add_to_subscription_checked:a.is(":checked")?"yes":"no",action:"wcsatt_load_subscriptions_matching_cart"};p.post(wcsatt_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",n.action),n,function(t){"success"===t.result?(e.html(t.html),c.removeClass("closed"),c.addClass("open"),e.slideDown(200)):window.alert(wcsatt_cart_params.i18n_subs_load_error),c.unblock()})}else c.removeClass("open"),c.addClass("closed"),e.slideUp(200)})});