{"version":3,"sources":["modal.js"],"names":["jQuery","$","AutomateWoo","Modal","init","document","body","on","this","close","handle_link","window","resize","position","keydown","e","keyCode","preventDefault","$a","type","data","size","open","loading","post","attr","response","contents","html","classes","push","addClass","append","removeClass","AW","initTooltips","remove","$modal","$modal_body","$modal_header","removeProp","modal_header_height","outerHeight","modal_height","height","modal_width","width","modal_contents_height","css","margin-left","margin-top"],"mappings":"AAGAA,OAAO,SAASC,GAEZC,YAAYC,MAAQ,CAEhBC,KAAM,WAEFH,EAAEI,SAASC,MAAMC,GAAI,QAAS,8BAA+BC,KAAKC,OAClER,EAAEI,SAASC,MAAMC,GAAI,QAAS,6BAA8BC,KAAKC,OACjER,EAAEI,SAASC,MAAMC,GAAI,QAAS,6BAA8BC,KAAKE,aAEjET,EAAEU,QAAQC,OAAO,WACbV,YAAYC,MAAMU,aAGtBZ,EAAEI,UAAUS,QAAQ,SAASC,GACP,IAAbA,EAAEC,SACHd,YAAYC,MAAMM,WAO9BC,YAAa,SAASK,GAClBA,EAAEE,iBAEF,IAAIC,EAAKjB,EAAEO,MACPW,EAAOD,EAAGE,KAAM,0BAChBC,EAAOH,EAAGE,KAAM,0BAEpB,GAAc,SAATD,EACDjB,YAAYC,MAAMmB,KAAMH,EAAME,GAC9BnB,YAAYC,MAAMoB,UAElBtB,EAAEuB,KAAMN,EAAGO,KAAK,QAAS,GAAI,SAAUC,GACnCxB,YAAYC,MAAMwB,SAAUD,UAG/B,GAAc,WAATP,EAAoB,CAC1B,IAAIQ,EAAW1B,EAAGiB,EAAGE,KAAM,+BAAiCQ,OAC5D1B,YAAYC,MAAMmB,KAAMH,EAAME,GAC9BnB,YAAYC,MAAMwB,SAAUA,KAKpCL,KAAM,SAAUH,EAAME,GAElB,IAAIQ,EAAU,CAAE,2BAA6BV,GAExCE,GACDQ,EAAQC,KAAM,2BAA6BT,GAG/CpB,EAAEI,SAASC,MAAMyB,SAAS,0BAA0BC,OAAO,iDAC3D/B,EAAEI,SAASC,MAAM0B,OAAO,iCAAmCH,EAAU,6KACrErB,KAAKK,YAITU,QAAS,WACLtB,EAAEI,SAASC,MAAMyB,SAAS,8BAI9BJ,SAAU,SAAWA,GACjB1B,EAAEI,SAASC,MAAM2B,YAAY,6BAC7BhC,EAAE,gCAAgC2B,KAAKD,GAEvCO,GAAGC,eAEH3B,KAAKK,YAITJ,MAAO,WACHR,EAAEI,SAASC,MAAM2B,YAAY,oDAC7BhC,EAAE,kDAAkDmC,UAIxDvB,SAAU,WAEN,IAAIwB,EAASpC,EAAE,sBACXqC,EAAcrC,EAAE,4BAChBsC,EAAgBtC,EAAE,8BAEtBqC,EAAYE,WAAW,SAEvB,IAAIC,EAAsBF,EAAcG,cACpCC,EAAeN,EAAOO,SACtBC,EAAcR,EAAOS,QAErBC,EADoBT,EAAYI,cACYD,EAEhDJ,EAAOW,IAAI,CACPC,eAAgBJ,EAAc,EAC9BK,cAAeP,EAAe,IAG7BA,EAAeI,EAAwB,GACxCT,EAAYM,OAAQD,EAAeF,KAO/CvC,YAAYC,MAAMC","file":"modal.min.js","sourcesContent":["/**\n * AutomateWoo Modal\n */\njQuery(function($) {\n\n    AutomateWoo.Modal = {\n\n        init: function(){\n\n            $(document.body).on( 'click', '.js-close-automatewoo-modal', this.close );\n            $(document.body).on( 'click', '.automatewoo-modal-overlay', this.close );\n            $(document.body).on( 'click', '.js-open-automatewoo-modal', this.handle_link );\n\n            $(window).resize(function(){\n                AutomateWoo.Modal.position();\n            });\n\n            $(document).keydown(function(e) {\n                if ( e.keyCode == 27 ) {\n                    AutomateWoo.Modal.close();\n                }\n            });\n\n        },\n\n\n        handle_link: function(e){\n            e.preventDefault();\n\n            var $a = $(this);\n            var type = $a.data( 'automatewoo-modal-type' );\n            var size = $a.data( 'automatewoo-modal-size' );\n\n            if ( type === 'ajax' ) {\n                AutomateWoo.Modal.open( type, size );\n                AutomateWoo.Modal.loading();\n\n                $.post( $a.attr('href'), {}, function( response ){\n                    AutomateWoo.Modal.contents( response );\n                });\n            }\n            else if ( type === 'inline' ) {\n                var contents = $( $a.data( 'automatewoo-modal-contents' ) ).html();\n                AutomateWoo.Modal.open( type, size );\n                AutomateWoo.Modal.contents( contents );\n            }\n        },\n\n\n        open: function( type, size ) {\n\n            var classes = [ 'automatewoo-modal--type-' + type ];\n\n            if ( size ) {\n                classes.push( 'automatewoo-modal--size-' + size );\n            }\n\n            $(document.body).addClass('automatewoo-modal-open').append('<div class=\"automatewoo-modal-overlay\"></div>');\n            $(document.body).append('<div class=\"automatewoo-modal ' + classes + '\"><div class=\"automatewoo-modal__contents\"><div class=\"automatewoo-modal__header\"></div></div><div class=\"automatewoo-icon-close js-close-automatewoo-modal\"></div></div>');\n            this.position();\n        },\n\n\n        loading: function() {\n            $(document.body).addClass('automatewoo-modal-loading');\n        },\n\n\n        contents: function ( contents ) {\n            $(document.body).removeClass('automatewoo-modal-loading');\n            $('.automatewoo-modal__contents').html(contents);\n\n            AW.initTooltips();\n\n            this.position();\n        },\n\n\n        close: function() {\n            $(document.body).removeClass('automatewoo-modal-open automatewoo-modal-loading');\n            $('.automatewoo-modal, .automatewoo-modal-overlay').remove();\n        },\n\n\n        position: function() {\n\n            var $modal = $('.automatewoo-modal');\n            var $modal_body = $('.automatewoo-modal__body');\n            var $modal_header = $('.automatewoo-modal__header');\n\n            $modal_body.removeProp('style');\n\n            var modal_header_height = $modal_header.outerHeight();\n            var modal_height = $modal.height();\n            var modal_width = $modal.width();\n            var modal_body_height = $modal_body.outerHeight();\n            var modal_contents_height = modal_body_height + modal_header_height;\n\n            $modal.css({\n                'margin-left': -modal_width / 2,\n                'margin-top': -modal_height / 2\n            });\n\n            if ( modal_height < modal_contents_height - 5 ) {\n                $modal_body.height( modal_height - modal_header_height );\n            }\n        }\n\n    };\n\n\n    AutomateWoo.Modal.init();\n\n});"]}